# Vim Keypress Analyzer

vim-keypress-analyzer parses a vim keypress log file generated by `(n)vim -w <a_log_file>` and aggregates key press counts.

## Features

- [x] count keys pressed by operating mode (NORMAL, INSERT, VISUAL, COMMAND)
- [x] count key frequencies (only when not in INSERT mode)
- [x] identify ALT mappings (e.g. `<m-l>`)

### TODO

- [ ] key sequence analysis (e.g. `jjj`)
  - [ ] (maybe) analyze for antipatterns like `li` (= `a`) or `jjjjjj` (= `5j`)?
- [ ] (maybe) `<leader><key>` detection?
- [ ] (maybe maybe) build a vim plugin that logs keys and log on the fly to a structured log format

## Example output

```sh
$ vim-keypress-analyzer -l 10 -f ~/.nvim_keylog

Vim Keypress Analyzer

Key presses per mode (total: 7334)
│───────────│───────│───────────│
│ NAME (4)  │ COUNT │ SHARE (%) │
│───────────│───────│───────────│
│ insert    │  3.9K │     54.38 │
│ normal    │  2.3K │     31.78 │
│ visual    │   848 │     11.56 │
│ command   │   167 │      2.28 │
│───────────│───────│───────────│

Key presses in non-INSERT mode (total: 3346)
│───────────│───────│───────────│
│ KEY (10)  │ COUNT │ SHARE (%) │
│───────────│───────│───────────│
│ w         │   403 │     12.04 │
│ <space>   │   277 │      8.28 │
│ j         │   262 │      7.83 │
│ k         │   212 │      6.34 │
│ d         │   172 │      5.14 │
│ b         │   138 │      4.12 │
│ e         │    93 │      2.78 │
│ u         │    87 │      2.60 │
│ o         │    86 │      2.57 │
│ i         │    76 │      2.27 │
│───────────│───────│───────────│
```

## Install

### Binary from GitHub release

1. Download the archive for your OS from the [releases page](https://github.com/phux/vim-keypress-analyzer/releases)
1. Extract the binary `vim-keypress-analyzer` to a directory in your `$PATH`

## Collecting keypresses in vim/nvim

Execute (n)vim with the `-w path/to/logfile` (see `:h -w`) flag to generate
a keypress log file.
Note: the file is only written on exiting (n)vim.

Helpful alias to always log your keys:

```sh
alias n='nvim -w ~/.nvim_keylog "$@"'
# or
alias v='vim -w ~/.vim_keylog "$@"'
```

If you want to split the logs per day, to track progress for example:

```sh
mkdir ~/.vim_logs

alias n='nvim -w ~/.vim_logs/$(date -Idate).log "$@"'
# or
alias v='vim -w ~/.vim_logs/$(date -Idate).log "$@"'
```

## Usage

```sh
$ vim-keypress-analyzer -f <a_log_file>
```

Optional:

Append `-l <number>` to limit the number of top keystrokes to show.
