# Vim Keypress Analyzer

vim-keypress-analyzer parses a vim keypress log file generated by `(n)vim -w <a_log_file>` and aggregates key press counts.

## Features

- [x] count keys pressed by operating mode (NORMAL, INSERT, VISUAL, COMMAND)
- [x] count key frequencies (only when not in INSERT mode)

### TODO

- [ ] identify ALT mappings (e.g. `<m-l>`)
- [ ] key sequence analysis (e.g. `jjj`)
  - [ ] (maybe) analyze for antipatterns like `li` (= `a`) or `jjjjjj` (= `5j`)?
- [ ] (maybe) `<leader><key>` detection?
- [ ] (maybe maybe) build a vim plugin that logs keys and log on the fly to a structured log format

## Example output

```sh
$ vim-keypress-analyzer -l 10 -f ~/.nvim_keylog

Vim Keypress Analyzer

Key presses per mode (total: 2852)
│───────────│───────│───────────│
│ NAME (4)  │ COUNT │ SHARE (%) │
│───────────│───────│───────────│
│ insert    │  1.8K │     66.34 │
│ normal    │   591 │     20.72 │
│ visual    │   294 │     10.31 │
│ command   │    75 │      2.63 │
│───────────│───────│───────────│

Key presses in non-INSERT mode (total: 960)
│───────────│───────│───────────│
│ KEY (10)  │ COUNT │ SHARE (%) │
│───────────│───────│───────────│
│ w         │   135 │     14.06 │
│ <space>   │    93 │      9.69 │
│ b         │    61 │      6.35 │
│ e         │    57 │      5.94 │
│ k         │    49 │      5.10 │
│ o         │    42 │      4.38 │
│ i         │    36 │      3.75 │
│ j         │    35 │      3.65 │
│ a         │    34 │      3.54 │
│ <cr>      │    25 │      2.60 │
│───────────│───────│───────────│
```

## Install

### Binary from GitHub release

1. Download the archive for your OS from the [releases page](https://github.com/phux/vim-keypress-analyzer/releases)
1. Extract the binary `vim-keypress-analyzer` to a directory in your `$PATH`

## Collecting keypresses in vim/nvim

Execute (n)vim with the `-w path/to/logfile` flag to generate a keypress log file. Note: the file is only written on exiting (n)vim.

Helpful alias:

```sh
n='nvim -w ~/.nvim_keylog "$@"'
v='vim -w ~/.vim_keylog "$@"'
```

## Usage

```sh
$ vim-keypress-analyzer -f <a_log_file>
```

Optional:

Append `-l <number>` to limit the number of top keystrokes to show.
